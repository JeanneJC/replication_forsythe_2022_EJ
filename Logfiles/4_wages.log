------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\18814\Dropbox\Forsythe 2021\Replication_games\Logfiles/4_wages.log
  log type:  text
 opened on:  26 Jun 2023, 12:36:58

. 
. * data
. use Data/final_dataset, clear

. 
. * pre-merging check 
. duplicates tag date cpsidp, gen(dup)

Duplicates in terms of date cpsidp

. tab dup

        dup |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 29,834,357      100.00      100.00
------------+-----------------------------------
      Total | 29,834,357      100.00

. 
. * merge 
. merge 1:1 year month cpsidp using Data\cps_00037.dta, keepusing(qearnwee)
(label ELIGORG already defined)
(label MONTH already defined)

    Result                      Number of obs
    -----------------------------------------
    Not matched                    26,045,414
        from master                25,535,792  (_merge==1)
        from using                    509,622  (_merge==2)

    Matched                         4,298,565  (_merge==3)
    -----------------------------------------

. tab empstat if _merge==1 

             employment status |      Freq.     Percent        Cum.
-------------------------------+-----------------------------------
                       at work | 14,364,362       56.25       56.25
has job, not at work last week |    612,070        2.40       58.65
unemployed, experienced worker |  1,016,064        3.98       62.63
        unemployed, new worker |     91,587        0.36       62.99
          nilf, unable to work |  1,447,843        5.67       68.66
                   nilf, other |  4,016,985       15.73       84.39
                 nilf, retired |  3,986,881       15.61      100.00
-------------------------------+-----------------------------------
                         Total | 25,535,792      100.00

. tab empstat if _merge==1 & eligorg==1
no observations

. tab empstat if _merge==2
no observations

. drop if _merge==2 
(509,622 observations deleted)

. 
. * re-declaring panel after merging 
. xtset cpsidp date, monthly

Panel variable: cpsidp (unbalanced)
 Time variable: date, 1994m5 to 2019m12, but with gaps
         Delta: 1 month

. order cpsidp date

. sort cpsidp date

. 
. * options for regressions
. set matsize 10000
set matsize ignored.
    Matrix sizes are no longer limited by c(matsize) in modern Statas.  Matrix sizes are now limited by edition of Stata.  See 
    limits for more details.

. set emptycells drop

. 
. * command to update/install estout package if needed
. ssc install estout, replace
checking estout consistency and verifying not already installed...
all files already exist and are up to date.

. 
. ** 
. 
. ** Initialize macro and variables
. 
. * variable for clustering
. gen clust_var = statefip

. 
. * variable for geo fixed effect
. gen geo_fe = statefip

.         
. * macro label for geographic fe unit
. global geo "State"

.         
. * latex path for tables
. global table_path = "$latex_path\Tables\LAUS"

. 
. * string for latex table label
. global tab_lbl = "original(LAUS)"

. 
. * categorical hire variable 
. gen to_hired = 0

.         replace to_hired = 1 if (empstat >= 10 & empstat <= 12) & (L.empstat >= 21 & L.empstat <= 22) 
(187,413 real changes made)

.         replace to_hired = 2 if (empstat >= 10 & empstat <= 12) & (L.empstat >= 32 & L.empstat <= 36) 
(335,684 real changes made)

.         replace to_hired = 3 if (empstat >= 10 & empstat <= 12) & (L.empstat >= 10 & L.empstat <= 12) & empsame == 1 
(295,699 real changes made)

.         replace to_hired = 0 if (to_hired >= 1 & to_hired <= 3) & (classwkr >= 13 & classwkr <= 14) // exclude transitions to self
> -employment 
(100,395 real changes made)

. label define new_hire 1 "hired from unemployment" 2 "hired from NILF" 3 "hired to a new job" 0 "otherwise" 

. label val to_hired new_hire 

. 
. * wage variable 
. drop if earnweek_cpiu_2010==99999999.99
(25,544,839 observations deleted)

. drop if earnweek_cpiu_2010<=1 // exclude non-positive log wage obs 
(1,454 observations deleted)

. 
. gen earnweek_cpiu_1994 = earnweek_cpiu_2010/1.48 // calculated using CPI calculator from BLS  

. count if earnweek_cpiu_1994==0
  0

. gen ln_w =ln( earnweek_cpiu_1994 )

. 
. * non-allocated wage indicator 
. tab qearnwee eligorg

              | (earnings)
 data quality | eligibilit
     flag for |   y flag
     earnweek |  eligible |     Total
--------------+-----------+----------
not allocated | 2,777,068 | 2,777,068 
    allocated | 1,283,404 | 1,283,404 
--------------+-----------+----------
        Total | 4,060,472 | 4,060,472 

. gen non_allocated = ( eligorg==1 & qearnwee==0 )

. 
. 
. forvalues step = 1(1)3 {
  2. 
. di " "
  3. di "****************"
  4. di " "
  5. di "Step `step'" 
  6. di " "
  7. di "****************"
  8. di " "
  9. 
. * step 1: regression with initial sample in paper (1994-2014)
. 
. 
. ** 
. 
. * step 2: run regression with our sample (1994-2019) 
. if `step' == 2 {
 10.                 
.         * update sample
.         replace sample = sample_2019
 11.         
.         * latex path
.         global table_path = "$latex_path\Tables\2019"
 12.         
.         * string for latex table label
.         global tab_lbl = "2019"
 13. 
. }
 14. 
. **
. 
. * step 3: use MSA variation instead of State
. if `step' == 3 {
 15. 
.         * update sample
.         replace sample = (sample & urate_msa != .)
 16.         
.         * update unemp. variable
.         replace urate = urate_msa
 17.         drop urate_msa
 18.         
.         * update variable for geo fixed effect
.         replace geo_fe = metarea
 19.         
.         * update variable for clustering (msa instead of state)
.         replace clust_var = metarea
 20.         
.         * geographic unit label
.         global geo "MSA"
 21.         
.         * latex path
.         global table_path = "$latex_path\Tables\MSA"
 22.         
.         * string for latex table label
.         global tab_lbl = "MSA"
 23. 
. }
 24. 
. di " "
 25. di "latex path for tables:"
 26. di "$table_path"
 27. di " "
 28. 
. 
. * Table 10 
. 
. * Panel A: Combine young and old together 
. 
. local fe = "i.demographic i.date i.clust_var i.occ1990 i.ind1990"
 29. 
. eststo clear 
 30. 
. * col (1)
. eststo: quietly reg ln_w urate `fe' if sample & non_allocated & (to_hired>=1 & to_hired<=3) [w=weights], vce(cluster clust_var) cf
> ormat(%9.4f) //all 
 31.         
. * col (2)
. eststo: quietly reg ln_w urate `fe' if sample & non_allocated & to_hired==3 [w=weights], vce(cluster clust_var) cformat(%9.4f) //f
> rom employed 
 32.         
. * col (3)
. eststo: quietly reg ln_w urate `fe' if sample & non_allocated & to_hired==1 [w=weights], vce(cluster clust_var) cformat(%9.4f) //f
> rom unemployed 
 33.         
. * col (4)
. eststo: quietly reg ln_w urate `fe' if sample & non_allocated & to_hired==2 [w=weights], vce(cluster clust_var) cformat(%9.4f) //f
> rom NILF 
 34. 
. * Stata table
. esttab, keep(urate) se r2 label nomtitles varwidth(35) 
 35. 
. * latex table
. esttab using "$table_path\table10a.tex", keep(urate) se r2 label nomtitles varwidth(35) replace ///
> booktabs title("Log Wages During Recessions for New Hires - Aggregated hires \label{table10a:$tab_lbl}") 
 36. 
. 
. * Panel B: Disaggregated
. 
. local variables = "i1.exp_group c.urate#i1.exp_group c.urate#i0.exp_group"
 37. 
. eststo clear 
 38. 
. * col (1)
. eststo: quietly reg ln_w `variables' `fe' if sample & non_allocated & (to_hired>=1 & to_hired<=3) [w=weights], vce(cluster clust_v
> ar) cformat(%9.4f) //all 
 39. quiet test c.urate#i1.exp_group = c.urate#i0.exp_group
 40. estadd local samp "All"
 41. estadd scalar w = r(F)
 42. 
. * col (2)       
. eststo: quietly reg ln_w `variables' `fe' if sample & non_allocated & to_hired==3 [w=weights], vce(cluster clust_var) cformat(%9.4
> f) //from employed 
 43. quiet test c.urate#i1.exp_group = c.urate#i0.exp_group
 44. estadd local samp "Employed"
 45. estadd scalar w = r(F)
 46. 
. * col (3)       
. eststo: quietly reg ln_w `variables' `fe' if sample & non_allocated & to_hired==1 [w=weights], vce(cluster clust_var) cformat(%9.4
> f) //from unemployed 
 47. quiet test c.urate#i1.exp_group = c.urate#i0.exp_group
 48. estadd local samp "Unemployed"
 49. estadd scalar w = r(F)
 50. 
. * col (4)       
. eststo: quietly reg ln_w `variables' `fe' if sample & non_allocated & to_hired==2 [w=weights], vce(cluster clust_var) cformat(%9.4
> f) //from NILF 
 51. quiet test c.urate#i1.exp_group = c.urate#i0.exp_group
 52. estadd local samp "NILF"
 53. estadd scalar w = r(F)
 54.         
. * Stata table
. esttab, keep(*.exp_group*) order(1.exp_group 1.exp_group#c.urate 0.exp_group#c.urate) ///
>         se label varwidth(35) interaction(" X ") stats(w r2 N, label("Wald test") star(w) ) nomtitles 
 55. 
. * latex table
. esttab using "$table_path\table10b.tex", replace keep(*.exp_group*) order(1.exp_group 1.exp_group#c.urate 0.exp_group#c.urate) ///
>         se stats(samp w r2 N, label("Sample" "Wald test" "$ R^2 $" "N")) interaction(" $\times$ ") ///
>         mtitles("(1)" "(2)" "(3)" "(4)") label varwidth(35) nonumbers /// 
>         booktabs title("Log Wages During Recessions for New Hires - Disaggregated by potential experience \label{table10b:$tab_lbl
> }") 
 56. 
. }
 
****************
 
Step 1
 
****************
 
 
latex path for tables:
C:\Users\18814\OneDrive\桌面\fun learnings\replication game\Forsythe_2021\Tables\LAUS
 
(est1 stored)
(est2 stored)
(est3 stored)
(est4 stored)

---------------------------------------------------------------------------------------------------
                                             (1)             (2)             (3)             (4)   
---------------------------------------------------------------------------------------------------
U.\ rate                                 -0.0162***      -0.0106*        -0.0168***      -0.0209** 
                                       (0.00365)       (0.00442)       (0.00418)       (0.00773)   
---------------------------------------------------------------------------------------------------
Observations                              118466           47220           31636           39610   
R-squared                                  0.420           0.475           0.411           0.349   
---------------------------------------------------------------------------------------------------
Standard errors in parentheses
* p<0.05, ** p<0.01, *** p<0.001
(output written to C:\Users\18814\OneDrive\桌面\fun learnings\replication game\Forsythe_2021\Tables\LAUS\table10a.tex)
(est1 stored)

added macro:
               e(samp) : "All"

added scalar:
                  e(w) =  25.200225
(est2 stored)

added macro:
               e(samp) : "Employed"

added scalar:
                  e(w) =  22.180648
(est3 stored)

added macro:
               e(samp) : "Unemployed"

added scalar:
                  e(w) =  2.9438978
(est4 stored)

added macro:
               e(samp) : "NILF"

added scalar:
                  e(w) =  12.101942

---------------------------------------------------------------------------------------------------
                                             (1)             (2)             (3)             (4)   
---------------------------------------------------------------------------------------------------
PE $\leq$ 10                              -0.121***       -0.169***       -0.153***      -0.0220   
                                        (0.0132)        (0.0204)        (0.0195)        (0.0351)   

PE $\leq$ 10 X U.\ rate                  -0.0252***      -0.0197***      -0.0227***      -0.0310***
                                       (0.00402)       (0.00455)       (0.00566)       (0.00636)   

PE $>$ 10 X U.\ rate                     -0.0103*       -0.00617         -0.0160***     -0.00897   
                                       (0.00419)       (0.00490)       (0.00387)        (0.0101)   
---------------------------------------------------------------------------------------------------
Wald test                                  25.20           22.18           2.944           12.10   
r2                                         0.429           0.492           0.421           0.354   
N                                         118466           47220           31636           39610   
---------------------------------------------------------------------------------------------------
Standard errors in parentheses
* p<0.05, ** p<0.01, *** p<0.001
(output written to C:\Users\18814\OneDrive\桌面\fun learnings\replication game\Forsythe_2021\Tables\LAUS\table10b.tex)
 
****************
 
Step 2
 
****************
 
(831,248 real changes made)
 
latex path for tables:
C:\Users\18814\OneDrive\桌面\fun learnings\replication game\Forsythe_2021\Tables\2019
 
(est1 stored)
(est2 stored)
(est3 stored)
(est4 stored)

---------------------------------------------------------------------------------------------------
                                             (1)             (2)             (3)             (4)   
---------------------------------------------------------------------------------------------------
U.\ rate                                 -0.0165***      -0.0111**       -0.0179**       -0.0210** 
                                       (0.00342)       (0.00390)       (0.00555)       (0.00601)   
---------------------------------------------------------------------------------------------------
Observations                              144149           56938           37874           49337   
R-squared                                  0.420           0.477           0.408           0.351   
---------------------------------------------------------------------------------------------------
Standard errors in parentheses
* p<0.05, ** p<0.01, *** p<0.001
(output written to C:\Users\18814\OneDrive\桌面\fun learnings\replication game\Forsythe_2021\Tables\2019\table10a.tex)
(est1 stored)

added macro:
               e(samp) : "All"

added scalar:
                  e(w) =  20.019063
(est2 stored)

added macro:
               e(samp) : "Employed"

added scalar:
                  e(w) =  22.192816
(est3 stored)

added macro:
               e(samp) : "Unemployed"

added scalar:
                  e(w) =  1.8373413
(est4 stored)

added macro:
               e(samp) : "NILF"

added scalar:
                  e(w) =  7.3277462

---------------------------------------------------------------------------------------------------
                                             (1)             (2)             (3)             (4)   
---------------------------------------------------------------------------------------------------
PE $\leq$ 10                              -0.137***       -0.171***       -0.154***      -0.0740*  
                                        (0.0131)        (0.0198)        (0.0218)        (0.0295)   

PE $\leq$ 10 X U.\ rate                  -0.0244***      -0.0204***      -0.0230**       -0.0282***
                                       (0.00431)       (0.00413)       (0.00739)       (0.00570)   

PE $>$ 10 X U.\ rate                     -0.0116**      -0.00668         -0.0172***      -0.0123   
                                       (0.00353)       (0.00433)       (0.00470)       (0.00789)   
---------------------------------------------------------------------------------------------------
Wald test                                  20.02           22.19           1.837           7.328   
r2                                         0.430           0.494           0.417           0.356   
N                                         144149           56938           37874           49337   
---------------------------------------------------------------------------------------------------
Standard errors in parentheses
* p<0.05, ** p<0.01, *** p<0.001
(output written to C:\Users\18814\OneDrive\桌面\fun learnings\replication game\Forsythe_2021\Tables\2019\table10b.tex)
 
****************
 
Step 3
 
****************
 
(1,040,913 real changes made)
(4,288,064 real changes made, 1,146,542 to missing)
(4,288,064 real changes made, 43,226 to missing)
(4,288,064 real changes made, 43,226 to missing)
 
latex path for tables:
C:\Users\18814\OneDrive\桌面\fun learnings\replication game\Forsythe_2021\Tables\MSA
 
(est1 stored)
(est2 stored)
(est3 stored)
(est4 stored)

---------------------------------------------------------------------------------------------------
                                             (1)             (2)             (3)             (4)   
---------------------------------------------------------------------------------------------------
U.\ rate                                0.000158       -0.000167       -0.000766       -0.000696   
                                       (0.00115)       (0.00165)       (0.00222)       (0.00219)   
---------------------------------------------------------------------------------------------------
Observations                              103129           41090           26710           35329   
R-squared                                  0.436           0.495           0.431           0.376   
---------------------------------------------------------------------------------------------------
Standard errors in parentheses
* p<0.05, ** p<0.01, *** p<0.001
(output written to C:\Users\18814\OneDrive\桌面\fun learnings\replication game\Forsythe_2021\Tables\MSA\table10a.tex)
(est1 stored)

added macro:
               e(samp) : "All"

added scalar:
                  e(w) =  5.4989002
(est2 stored)

added macro:
               e(samp) : "Employed"

added scalar:
                  e(w) =  1.6901085
(est3 stored)

added macro:
               e(samp) : "Unemployed"

added scalar:
                  e(w) =  .21415892
(est4 stored)

added macro:
               e(samp) : "NILF"

added scalar:
                  e(w) =  5.6269926

---------------------------------------------------------------------------------------------------
                                             (1)             (2)             (3)             (4)   
---------------------------------------------------------------------------------------------------
PE $\leq$ 10                              -0.196***       -0.234***       -0.190***       -0.129***
                                        (0.0124)        (0.0166)        (0.0201)        (0.0251)   

PE $\leq$ 10 X U.\ rate                 -0.00202        -0.00168        -0.00160        -0.00442   
                                       (0.00150)       (0.00213)       (0.00291)       (0.00267)   

PE $>$ 10 X U.\ rate                     0.00240         0.00117       -0.000217         0.00438   
                                       (0.00146)       (0.00178)       (0.00245)       (0.00311)   
---------------------------------------------------------------------------------------------------
Wald test                                  5.499           1.690           0.214           5.627   
r2                                         0.446           0.512           0.441           0.382   
N                                         103129           41090           26710           35329   
---------------------------------------------------------------------------------------------------
Standard errors in parentheses
* p<0.05, ** p<0.01, *** p<0.001
(output written to C:\Users\18814\OneDrive\桌面\fun learnings\replication game\Forsythe_2021\Tables\MSA\table10b.tex)

. 
. 
. ** 
. 
. /* Notes. 
> 
> 1. alternative demographics can be defined as the folowing, however, the estimates don't differ significantly when holding differe
> nt demographic fixed effects. 
> 
>         gen minority = (race > 100)                // 100 == white 
>         gen female = (sex==2 )
>         gen hisp1 = (hisp>0 & hisp<901)            // hispanic descent or not
>         egen demo2 = group(minority female hisp1 educg)
>         egen demo3 = group(minority female hisp1)
> */
. 
. 
. log close
      name:  <unnamed>
       log:  C:\Users\18814\Dropbox\Forsythe 2021\Replication_games\Logfiles/4_wages.log
  log type:  text
 closed on:  26 Jun 2023, 12:45:40
------------------------------------------------------------------------------------------------------------------------------------
